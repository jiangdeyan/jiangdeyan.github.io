---
layout:     post
title:     字符集简单知识 
category: cheatsheet
description: 关于ASCI,ANSI,GBK,GB2312，Unicode,UTF-8
---


参考网上

ASCII，用7位表示字符，因此只能表示128个字符，只适用于英文环境，对于表示字符来说局限性很大，但是在字符串处理中很重要，经常被兼容。  
 
ANSI=窄字节，ANSI**最初**使用char格式表示一个字符，占用一个字节的存储空间，即8位，因此最多可以表示255个字符，因为兼容ASCII，表示英文等字母语言还可以够用，但是表示中，日，韩就不够了。所以如果你的程序是ANSI编码的话，那么你写的中文语言的程序拿到日，韩等系统上会出现乱码。但是ANSI如何表示中文的呢？ANSI编码没有固定的格式，ANSI有下面格式：

- 单字节编码，最多可以支持256个字符。
- 多字节编码，比如显示中文的GB2312 和显示日文的JIS，还有台湾的BIG5，这些编码都是单字节兼容ASCII，双字节表示各自的语言符号。缺点是国际兼容性差。

GB2312编码是多字节ANSI编码，采用EUC储存方法，兼容ASCII。当表示汉字时，前面的一个字节（他称之为高字节）从0xA1用到 0xF7，后面一个字节（低字节）从0xA1到0xFE。全角字符也在这个编码中被定义，缺点，支持的汉字少。  

GBK是GB2312的扩展，同样兼容ASCII，但不是国家强制标准，是业内标准。总体上说第一字节的范围是81–FE（也就是不含80和FF），第二字节的一部分领域在40–7E，其他领域在80–FE。  

Unicode=宽字节，可以使用2个字节（UCS-2）或者4个字节（UCS-4），一般用wchar_t表示（具体长度编译器相关）。Unicode的编码虽然可以字符集很全，但是字符编码较长，而且如果有些字节是0的话，与字符串的结束符'\0'冲突(UCS-4)。因此Unicode的传输方式是Unicode转换格式（UTF），最常用的应该是UTF-8了。

UTF-8兼容ASCII，根据编码的不同，长度也不同，当第一个字节开头是0XXX XXXX时，与ASCII相同，只用一个字节表示。当第一个字节是110X XXXX时，用两个字节表示，110X XXXX 10XX XXXX，依次类推。优点很明显，缺点就是变长编码，长度不能控制，相比GBK来说，一个汉字基本要占用三个字节，在存储大量汉字的时候占用很多空间。

BOM（byte order mark）是为 UTF-16 和 UTF-32 准备的，用于标记字节序（byte order）。例如“奎”的Unicode编码是594E，“乙”的Unicode编码是4E59。如果我们收到UTF-16字节流“594E”，那么这是“奎”还是“乙”？通常使用"零宽度非换行空格"（ZERO WIDTH NO-BREAK SPACE），分为Big endian和 Little endian。UTF-8的字节顺序是不变的，因此行业标准不需要BOM，但是微软为了区分UTF-8和ANSI，也在开头加入了BOM（编码为EF BB BF），也导致了BOM污染的问题。最简单的例子就是“记事本输入联通”了。

通用类型：TCHAR、(TCHAR * 、PTCHAR、PTSTR、LPTSTR)、LPCTSTR

以上，其中：P代表指针的意思，STR代表字符串的意思，L是长指针的意思，在WIN32平台下可以忽略，C代表const常量的意思，W代表wide宽字节的意思，T大家可以理解为通用类型的意思，就是可以根据工程中是否定义_UNICODE 宏，分别定义成不同的类型，比如：TCHAR 类型，如果工程中定义了_UNICODE 宏，那么他最终被定义成 wchar_t 类型，如果工程中没有定义_UNICODE 宏，那么 TCHAR 被最终定义成 char 类型。












 
